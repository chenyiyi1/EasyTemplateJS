/**
 * EasyTemplate
 * 
 * Version 2.2.0
 * 
 * http://easyproject.cn 
 * https://github.com/ushelp
 * 
 * Copyright 2012 Ray [ inthinkcolor@gmail.com ]
 * Released under the MIT license
 * 
 * [Support AMD, CMD, CommonJS, Node.js, Express]
 * 
 */
!function(){"use strict";var B,C,b="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,d=b||c||Function("return this")(),e="object"==typeof exports&&exports&&!exports.nodeType&&exports,f=e&&"object"==typeof module&&module&&!module.nodeType&&module,g=d.Et,h=/(.)^/,i=/\\|'|\r|\n|\t|\u2028|\u2029/g,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},k={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},unescape:{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"}},l=new RegExp("<etj-script>((.|\r|\n|\r\n|\n\r)*?)</etj-script>","igm"),m=new RegExp("<#script#></#script#>","ig"),n=new RegExp("<etj-style>((.|\r|\n|\r\n|\n\r)*?)</etj-style>","igm"),o=new RegExp("<#style#></#style#>","ig"),p=function(a,b){return hasOwnProperty.call(a,b)},q=Object.keys||function(a){var b,c;if(a!==Object(a))throw new TypeError("Invalid object");b=[];for(c in a)p(a,c)&&b.push(c);return b},r={escape:new RegExp("["+q(k.escape).join("")+"]","g"),unescape:new RegExp("("+q(k.unescape).join("|")+")","g")},s=Array.prototype.slice,t=function(a){return C.each(s.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},u=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,v=/[^\w$]+/g,w=new RegExp(["\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),x=/^\d[^,]*|,\d[^,]*/g,y=/^,+|,+$/g,z=/^$|,+/,A=function(a){var e,f,g,b=a.replace(u,"").replace(v,",").replace(w,"").replace(x,"").replace(y,"").split(z),c={},d=[];for(e=0;e<b.length;e++)c[b[e]]||"_p"==b[e]||"Et"==b[e]||"out"==b[e]||(c[b[e]]=!0,d.push(b[e]));for(f="var ";d.length;)g=d.shift(),f+=""+g+"= data."+g+",";return f};g=d.Et,C={enableScript:!1,enableStyle:!1,tmplSettings:{scriptBegin:"%{",scriptEnd:"}%",outBegin:"{",outEnd:"}",escapeOutBegin:"{-",escapeOutEnd:"}"},escape:function(a){return null==a?"":(""+a).replace(r["escape"],function(a){return k["escape"][a]})},unescape:function(a){return null==a?"":(""+a).replace(r["unescape"],function(a){return k["unescape"][a]})},each:function(a,b,c){var d,e,f;if(null!=a)if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length){for(d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===breaker)return}else for(f=f(a),d=0,e=f.length;e>d;d++)if(b.call(c,a[f[d]],f[d],a)===breaker)return},template:function(a,b,c){var d,e,f,g,k,p,q,s;a+="",d=[],e=[],this.enableScript&&(a=a.replace(l,function(a,b){return d.push("<script>"+b.trim().replace(/\/\/.*/g,"").replace(/\/\*[\s\S]*\*\//g,"").replace(/'|"/g,"\\'").replace(/((\r)|(\n)|(\r\n))/g,function(a,b){return"'+"+b+"'"}).replace(/^(\s+)(\S+)/g,function(a,b,c){return"'"+c})+"</script>"),"<#script#></#script#>"})),c?(c=t({},c,C.tmplSettings),c={script:new RegExp(c.scriptBegin.replace(/(.)/g,"\\$1")+"([\\s\\S]+?)"+c.scriptEnd.replace(/(.)/g,"\\$1"),"g"),out:new RegExp(c.outBegin.replace(/(.)/g,"\\$1")+"([\\s\\S]+?)"+c.outEnd.replace(/(.)/g,"\\$1"),"g"),escapeOut:new RegExp(c.escapeOutBegin.replace(/(.)/g,"\\$1")+"([\\s\\S]+?)"+c.escapeOutEnd.replace(/(.)/g,"\\$1"),"g")}):(B||(B={script:new RegExp(C.tmplSettings.scriptBegin.replace(/(.)/g,"\\$1")+"([\\s\\S]+?)"+C.tmplSettings.scriptEnd.replace(/(.)/g,"\\$1"),"g"),out:new RegExp(C.tmplSettings.outBegin.replace(/(.)/g,"\\$1")+"([\\s\\S]+?)"+C.tmplSettings.outEnd.replace(/(.)/g,"\\$1"),"g"),escapeOut:new RegExp(C.tmplSettings.escapeOutBegin.replace(/(.)/g,"\\$1")+"([\\s\\S]+?)"+C.tmplSettings.escapeOutEnd.replace(/(.)/g,"\\$1"),"g")}),c=B),a=C.unescape(a),this.enableStyle&&(a=a.replace(n,function(a,b){return e.push("<style>"+b.replace(/\r|\n/g,"").replace(/\s+\}/g,"}").replace(/\}\s+/g,"}").replace(/\{\s+/g,"{").replace(/;\s+/g,";").replace(/\/(\*([^\/])+\*)\//g,"").replace(/'|"/g,"\\'").trim()+"</style>"),"<#style#></#style#>"})),g=new RegExp([(c.escapeOut||h).source,(c.out||h).source,(c.script||h).source].join("|")+"|$","g"),k=0,p="_p+='",a.replace(g,function(b,c,d,e,f){return p+=a.slice(k,f).replace(i,function(a){return"\\"+j[a]}),c&&(p+="'+\n((_t=("+c+"))==null?'':Et.escape(_t))+'"),d&&(p+="'+\n((_t=("+d+"))==null?'':_t)+'"),e&&(p+="';"+e+"\n_p+='"),k=f+b.length,b}),p+="';",q=A(p),p="'use strict';"+q+"_t,_p='',out=function(){_p+=Array.prototype.join.call(arguments, '')};"+p+"return _p";try{this.enableScript&&(p=p.replace(m,function(){return d.shift()})),this.enableStyle&&(p=p.replace(o,function(){return e.shift()})),f=new Function("data","Et",p)}catch(r){throw r.source="function anonymous(data,Et) {"+p+"}",r}if(b)try{return f(b,C)}catch(r){console.error(r)}return s=function(a){try{return f(a,C)}catch(b){console.error(b)}}},noConflict:function(){return d.Et===C&&(d.Et=g),C}},"function"==typeof define&&(define.amd||define.cmd)?define([],function(){return C}):f?((f.exports=C).Et=C,e.Et=C):d.Et=C}.call(this);